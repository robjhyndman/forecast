<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Forecasting model using STL with a generative time series model — stlm • forecast</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><!-- katex math --><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css" integrity="sha384-nB0miv6/jRmo5UMMR1wu3Gz6NLsoTkbqJghGIsx//Rlm+ZU03BU6SQNC66uf4l5+" crossorigin="anonymous"><script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.js" integrity="sha384-7zkQWkzuo3B5mTepMUcHkMB5jZaolc2xDwL6VFqjFALcbeS9Ggm/Yr2r3Dy4lfFg" crossorigin="anonymous"></script><script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/auto-render.min.js" integrity="sha384-43gviWU0YVjaDtb/GhzOouOXtZMP/7XUzwPTstBeZFe/+rCMvRwr4yROQP43s0Xk" crossorigin="anonymous" onload="renderMathInElement(document.body);"></script><script src="../katex-auto.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Fira_Sans-0.4.10/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Forecasting model using STL with a generative time series model — stlm"><meta name="description" content="Forecasts of STL objects are obtained by applying a non-seasonal forecasting
model to the seasonally adjusted data and re-seasonalizing using the last
year of the seasonal component. stlm takes a time series y, applies an STL decomposition, and
models the seasonally adjusted data using the model passed as
modelfunction or specified using method. It returns an object
that includes the original STL decomposition and a time series model fitted
to the seasonally adjusted data. This object can be passed to the
forecast.stlm for forecasting."><meta property="og:description" content="Forecasts of STL objects are obtained by applying a non-seasonal forecasting
model to the seasonally adjusted data and re-seasonalizing using the last
year of the seasonal component. stlm takes a time series y, applies an STL decomposition, and
models the seasonally adjusted data using the model passed as
modelfunction or specified using method. It returns an object
that includes the original STL decomposition and a time series model fitted
to the seasonally adjusted data. This object can be passed to the
forecast.stlm for forecasting."><meta property="og:image" content="https://pkg.robjhyndman.com/forecast/logo.png"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hack-font@3/build/web/hack-subset.css"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">forecast</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">8.24.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://cran.r-project.org/web/packages/forecast/vignettes/JSS2008.pdf">JSS paper</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Change Log</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/robjhyndman/forecast/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Forecasting model using STL with a generative time series model</h1>
      <small class="dont-index">Source: <a href="https://github.com/robjhyndman/forecast/blob/master/R/mstl.R" class="external-link"><code>R/mstl.R</code></a></small>
      <div class="d-none name"><code>stlm.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Forecasts of STL objects are obtained by applying a non-seasonal forecasting
model to the seasonally adjusted data and re-seasonalizing using the last
year of the seasonal component. <code>stlm</code> takes a time series <code>y</code>, applies an STL decomposition, and
models the seasonally adjusted data using the model passed as
<code>modelfunction</code> or specified using <code>method</code>. It returns an object
that includes the original STL decomposition and a time series model fitted
to the seasonally adjusted data. This object can be passed to the
<code>forecast.stlm</code> for forecasting.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">stlm</span><span class="op">(</span></span>
<span>  <span class="va">y</span>,</span>
<span>  s.window <span class="op">=</span> <span class="fl">7</span> <span class="op">+</span> <span class="fl">4</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">6</span><span class="op">)</span>,</span>
<span>  t.window <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  robust <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  method <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ets"</span>, <span class="st">"arima"</span><span class="op">)</span>,</span>
<span>  modelfunction <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  model <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  etsmodel <span class="op">=</span> <span class="st">"ZZN"</span>,</span>
<span>  lambda <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  biasadj <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  xreg <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  allow.multiplicative.trend <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  x <span class="op">=</span> <span class="va">y</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-y">y<a class="anchor" aria-label="anchor" href="#arg-y"></a></dt>
<dd><p>a numeric vector or univariate time series of class <code>ts</code></p></dd>


<dt id="arg-s-window">s.window<a class="anchor" aria-label="anchor" href="#arg-s-window"></a></dt>
<dd><p>Either the character string <code>"periodic"</code> or the span (in
lags) of the loess window for seasonal extraction.</p></dd>


<dt id="arg-t-window">t.window<a class="anchor" aria-label="anchor" href="#arg-t-window"></a></dt>
<dd><p>A number to control the smoothness of the trend. See
<code><a href="https://rdrr.io/r/stats/stl.html" class="external-link">stats::stl()</a></code> for details.</p></dd>


<dt id="arg-robust">robust<a class="anchor" aria-label="anchor" href="#arg-robust"></a></dt>
<dd><p>If <code>TRUE</code>, robust fitting will used in the loess
procedure within <code><a href="https://rdrr.io/r/stats/stl.html" class="external-link">stats::stl()</a></code>.</p></dd>


<dt id="arg-method">method<a class="anchor" aria-label="anchor" href="#arg-method"></a></dt>
<dd><p>Method to use for forecasting the seasonally adjusted series.</p></dd>


<dt id="arg-modelfunction">modelfunction<a class="anchor" aria-label="anchor" href="#arg-modelfunction"></a></dt>
<dd><p>An alternative way of specifying the function for
modelling the seasonally adjusted series. If <code>modelfunction</code> is not
<code>NULL</code>, then <code>method</code> is ignored. Otherwise <code>method</code> is used
to specify the time series model to be used.</p></dd>


<dt id="arg-model">model<a class="anchor" aria-label="anchor" href="#arg-model"></a></dt>
<dd><p>Output from a previous call to <code>stlm</code>. If a <code>stlm</code>
model is passed, this same model is fitted to y without re-estimating any
parameters.</p></dd>


<dt id="arg-etsmodel">etsmodel<a class="anchor" aria-label="anchor" href="#arg-etsmodel"></a></dt>
<dd><p>The ets model specification passed to
<code><a href="ets.html">ets()</a></code>. By default it allows any non-seasonal model. If
<code>method != "ets"</code>, this argument is ignored.</p></dd>


<dt id="arg-lambda">lambda<a class="anchor" aria-label="anchor" href="#arg-lambda"></a></dt>
<dd><p>Box-Cox transformation parameter. If <code>lambda = "auto"</code>,
then a transformation is automatically selected using <code>BoxCox.lambda</code>.
The transformation is ignored if NULL. Otherwise,
data transformed before model is estimated.</p></dd>


<dt id="arg-biasadj">biasadj<a class="anchor" aria-label="anchor" href="#arg-biasadj"></a></dt>
<dd><p>Use adjusted back-transformed mean for Box-Cox
transformations. If transformed data is used to produce forecasts and fitted
values, a regular back transformation will result in median forecasts. If
biasadj is <code>TRUE</code>, an adjustment will be made to produce mean forecasts
and fitted values.</p></dd>


<dt id="arg-xreg">xreg<a class="anchor" aria-label="anchor" href="#arg-xreg"></a></dt>
<dd><p>Historical regressors to be used in
<code><a href="auto.arima.html">auto.arima()</a></code> when <code>method = "arima"</code>.</p></dd>


<dt id="arg-allow-multiplicative-trend">allow.multiplicative.trend<a class="anchor" aria-label="anchor" href="#arg-allow-multiplicative-trend"></a></dt>
<dd><p>If <code>TRUE</code>, then ETS models with
multiplicative trends are allowed. Otherwise, only additive or no trend ETS
models are permitted.</p></dd>


<dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>Deprecated. Included for backwards compatibility.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Other arguments passed to <code>modelfunction</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>An object of class <code>stlm</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The time series model for the seasonally adjusted data can be specified in
<code>stlm</code> using either <code>method</code> or <code>modelfunction</code>. The
<code>method</code> argument provides a shorthand way of specifying
<code>modelfunction</code> for a few special cases. More generally,
<code>modelfunction</code> can be any function with first argument a <code>ts</code>
object, that returns an object that can be passed to <code><a href="https://generics.r-lib.org/reference/forecast.html" class="external-link">forecast()</a></code>.
For example, <code>modelfunction = ar</code> uses the <code><a href="https://rdrr.io/r/stats/ar.html" class="external-link">ar()</a></code> function
for modelling the seasonally adjusted series.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="https://rdrr.io/r/stats/stl.html" class="external-link">stats::stl()</a></code>, <code><a href="ets.html">ets()</a></code>, <code><a href="Arima.html">Arima()</a></code>.</p></div>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Rob J Hyndman</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">tsmod</span> <span class="op">&lt;-</span> <span class="fu">stlm</span><span class="op">(</span><span class="va">USAccDeaths</span>, modelfunction <span class="op">=</span> <span class="va">ar</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://generics.r-lib.org/reference/forecast.html" class="external-link">forecast</a></span><span class="op">(</span><span class="va">tsmod</span>, h <span class="op">=</span> <span class="fl">36</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/autoplot.html" class="external-link">autoplot</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="stlm-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">decomp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/stl.html" class="external-link">stl</a></span><span class="op">(</span><span class="va">USAccDeaths</span>, s.window <span class="op">=</span> <span class="st">"periodic"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://generics.r-lib.org/reference/forecast.html" class="external-link">forecast</a></span><span class="op">(</span><span class="va">decomp</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/autoplot.html" class="external-link">autoplot</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="stlm-2.png" alt="" width="700" height="433"></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="http://robjhyndman.com" class="external-link">Rob Hyndman</a>, George Athanasopoulos, <a href="https://github.com/cbergmeir" class="external-link">Christoph Bergmeir</a>, <a href="https://github.com/gabrielcaceres" class="external-link">Gabriel Caceres</a>, Leanne Chhay, Kirill Kuroptev, <a href="https://github.com/m-muecke" class="external-link">Maximilian Mücke</a>, <a href="https://github.com/mitchelloharawild" class="external-link">Mitchell O’Hara-Wild</a>, <a href="http://fpetropoulos.eu" class="external-link">Fotios Petropoulos</a>, <a href="https://github.com/slavarazbash" class="external-link">Slava Razbash</a>, <a href="http://earo.me" class="external-link">Earo Wang</a>, Farah Yasmeen.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

